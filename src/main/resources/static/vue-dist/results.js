import{E as rt,h as D,i as N,D as J,I as lt,m as q,_ as B,c as g,a as f,b as t,t as x,n as V,o as Y,p as z,q as nt,d as M,u as I,k as S,F as Z,f as Q,j as X,x as j,J as ot,z as it,y as ut}from"./chunks/_plugin-vue_export-helper-B8S04SUJ.js";const ct=rt("testResults",()=>{const s=D(null),n=D([]),l=D(null),p=D(!1),u=D(!1),r=D(null),o=D(new Map),h=5*60*1e3,a=N(()=>!!s.value),e=N(()=>n.value.length>0),T=N(()=>!!r.value),R=N(()=>{var m,y;return((y=(m=s.value)==null?void 0:m.status)==null?void 0:y.toUpperCase())||"UNKNOWN"}),b=N(()=>R.value==="COMPLETED"),U=N(()=>s.value?{successRate:s.value.successRate||0,totalRequests:s.value.totalRequests||0,avgResponseTime:s.value.avgResponseTime||0,maxTps:s.value.maxTps||0,p95ResponseTime:s.value.p95ResponseTime||0,maxConcurrentUsers:s.value.maxConcurrentUsers||0,duration:s.value.actualDurationSeconds||0}:null),v=async(m,y=!0)=>{var $,_;if(!m)throw new Error("테스트 ID가 필요합니다.");const k=`result_${m}`;if(y&&o.value.has(k)){const C=o.value.get(k);if(Date.now()-C.timestamp<h)return s.value=C.data,C.data}p.value=!0,r.value=null;try{console.log("Fetching test result from API for:",m);const C=await J.get(`/tests/${m}/result`);if(console.log("API Response received:",C),!C||!C.testId)throw console.error("Invalid data structure:",C),new Error("유효하지 않은 테스트 결과 데이터입니다.");return s.value=C,console.log("Test result stored in state:",s.value),o.value.set(k,{data:C,timestamp:Date.now()}),C}catch(C){const E=((_=($=C.response)==null?void 0:$.data)==null?void 0:_.message)||C.message||"테스트 결과를 불러오는데 실패했습니다.";throw r.value=E,new Error(E)}finally{p.value=!1}},P=async(m,y=!0)=>{if(!m)throw new Error("테스트 ID가 필요합니다.");const k=`metrics_${m}`;if(y&&o.value.has(k)){const $=o.value.get(k);if(Date.now()-$.timestamp<h)return n.value=$.data,$.data}u.value=!0;try{const _=(await J.get(`/tests/${m}/metrics`)||[]).filter(C=>C.timestamp&&!isNaN(new Date(C.timestamp).getTime())).sort((C,E)=>new Date(C.timestamp)-new Date(E.timestamp)).slice(-500);return n.value=_,o.value.set(k,{data:_,timestamp:Date.now()}),_}catch($){return console.warn("메트릭 히스토리 로드 실패:",$),n.value=[],[]}finally{u.value=!1}},L=async m=>{if(!m)return null;try{const y=await J.get(`/tests/${m}/report-url`),k=(y==null?void 0:y.reportUrl)||(y==null?void 0:y.url);return l.value=k,k}catch(y){return console.warn("리포트 URL 조회 실패:",y),l.value=null,null}},w=async m=>{if(!m)throw new Error("테스트 ID가 필요합니다.");try{await v(m),await Promise.allSettled([P(m),L(m)])}catch(y){throw y}},d=async m=>{[`result_${m}`,`metrics_${m}`].forEach(k=>o.value.delete(k)),await w(m)},F=()=>{s.value=null,n.value=[],l.value=null,p.value=!1,u.value=!1,r.value=null},K=(m=null)=>{m?[`result_${m}`,`metrics_${m}`].forEach(k=>o.value.delete(k)):o.value.clear()},O=N(()=>{if(!e.value)return null;const m=n.value,y=m.map($=>$.tps||0).filter($=>$>0),k=m.map($=>$.avgResponseTime||0).filter($=>$>0);return y.length===0?null:{avgTps:y.reduce(($,_)=>$+_,0)/y.length,maxTps:Math.max(...y),minTps:Math.min(...y),avgResponseTime:k.reduce(($,_)=>$+_,0)/k.length,maxResponseTime:Math.max(...k),minResponseTime:Math.min(...k),dataPoints:m.length}});return{testResult:s,metricsHistory:n,reportUrl:l,loading:p,chartsLoading:u,error:r,hasData:a,hasMetrics:e,hasError:T,testStatus:R,isCompleted:b,summary:U,getStatistics:O,fetchTestResult:v,fetchMetricsHistory:P,fetchReportUrl:L,loadAllData:w,refresh:d,reset:F,clearCache:K}});function dt(){const s=ct(),n=D(!1),l=D(null),{testResult:p,metricsHistory:u,reportUrl:r,loading:o,chartsLoading:h,error:a,hasData:e,hasMetrics:T,hasError:R,testStatus:b,isCompleted:U,summary:v}=lt(s),P=N(()=>T.value?{datasets:[{label:"TPS (Transactions Per Second)",data:u.value.slice(-300).map(c=>({x:new Date(c.timestamp),y:c.tps||0})).filter(c=>!isNaN(c.x.getTime())),borderColor:"rgb(102, 126, 234)",backgroundColor:"rgba(102, 126, 234, 0.1)",fill:!0,tension:.2,pointRadius:2,pointHoverRadius:4}]}:null),L=N(()=>T.value?{datasets:[{label:"평균 응답시간 (ms)",data:u.value.slice(-300).map(c=>({x:new Date(c.timestamp),y:c.avgResponseTime||0})).filter(c=>!isNaN(c.x.getTime())),borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",fill:!0,tension:.2,pointRadius:2,pointHoverRadius:4}]}:null),w=N(()=>T.value?{datasets:[{label:"에러율 (%)",data:u.value.slice(-300).map(c=>{const A=c.totalRequests||0,H=c.errorCount||0;return{x:new Date(c.timestamp),y:A>0?H/A*100:0}}).filter(c=>!isNaN(c.x.getTime())),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!0,tension:.2,pointRadius:2,pointHoverRadius:4}]}:null),d=N(()=>T.value?{datasets:[{label:"동시 사용자 수",data:u.value.slice(-300).map(c=>({x:new Date(c.timestamp),y:c.activeUsers||0})).filter(c=>!isNaN(c.x.getTime())),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.2,pointRadius:2,pointHoverRadius:4}]}:null),F=(i,c=0)=>i==null?"N/A":new Intl.NumberFormat("ko-KR",{minimumFractionDigits:c,maximumFractionDigits:c}).format(i),K=(i,c=1)=>i==null?"N/A":F(i,c)+"%",O=i=>i==null?"N/A":Math.round(i)+"ms",m=i=>{if(i==null||i<0)return"N/A";const c=Math.floor(i/3600),A=Math.floor(i%3600/60),H=i%60;return c>0?`${c}시간 ${A}분 ${H}초`:A>0?`${A}분 ${H}초`:`${i}초`},y=(i,c="full")=>{if(!i)return"N/A";try{const A=new Date(i);if(isNaN(A.getTime()))return"Invalid Date";const H={full:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},short:{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},time:{hour:"2-digit",minute:"2-digit",hour12:!1}};return new Intl.DateTimeFormat("ko-KR",H[c]||H.full).format(A)}catch(A){return console.warn("날짜 포맷팅 오류:",A),"N/A"}},k=async i=>await s.fetchTestResult(i),$=async i=>await s.fetchMetricsHistory(i),_=async i=>await s.fetchReportUrl(i),C=async i=>await s.loadAllData(i),E=async i=>await s.refresh(i),tt=(i,c=30)=>{l.value&&clearInterval(l.value),n.value=!0,l.value=setInterval(async()=>{try{await E(i)}catch(A){console.warn("자동 새로고침 실패:",A)}},c*1e3)},W=()=>{l.value&&(clearInterval(l.value),l.value=null),n.value=!1},et=N(()=>s.getStatistics.value),st=N(()=>{if(!v.value)return null;const{successRate:i,avgResponseTime:c}=v.value;return i>=99&&c<=100?"A+":i>=98&&c<=200?"A":i>=95&&c<=500?"B":i>=90&&c<=1e3?"C":"D"}),at=()=>{W(),s.reset()};return q(b,i=>{i==="RUNNING"&&!n.value?console.log("실행 중인 테스트 감지 - 자동 새로고침 가능"):i==="COMPLETED"&&n.value&&W()}),{testResult:p,metricsHistory:u,reportUrl:r,loading:o,chartsLoading:h,error:a,hasData:e,hasMetrics:T,hasError:R,testStatus:b,isCompleted:U,summary:v,statistics:et,tpsChartData:P,responseTimeChartData:L,errorRateChartData:w,activeUsersChartData:d,formatNumber:F,formatPercentage:K,formatResponseTime:O,formatDuration:m,formatDateTime:y,loadResults:k,loadMetricsHistory:$,loadReportUrl:_,loadAllData:C,refresh:E,autoRefresh:n,startAutoRefresh:tt,stopAutoRefresh:W,performanceGrade:st,cleanup:at}}const ft={class:"bg-white border border-gray-200 p-4 mb-4"},mt={class:"text-xl font-bold mb-4 text-gray-900"},gt={class:"font-mono text-blue-600 ml-2",style:{"font-family":"'Inter', monospace","font-variant-numeric":"tabular-nums"}},pt={class:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4"},vt={class:"flex items-center gap-3 bg-gray-50 p-3 border border-gray-200"},yt={class:"font-mono text-gray-900 text-base",style:{"font-family":"'Inter', monospace","font-variant-numeric":"tabular-nums"}},ht={class:"flex items-center gap-3 bg-gray-50 p-3 border border-gray-200"},bt={class:"font-mono text-gray-900 text-base",style:{"font-family":"'Inter', monospace","font-variant-numeric":"tabular-nums"}},xt={class:"flex items-center gap-3 bg-gray-50 p-3 border border-gray-200"},Rt={class:"font-mono font-semibold text-gray-900 text-base",style:{"font-family":"'Inter', monospace","font-variant-numeric":"tabular-nums"}},wt={__name:"ResultsHeader",props:{testResult:{type:Object,required:!0,default:()=>({})}},setup(s){const n=s,l=u=>{if(!u)return"N/A";try{const r=new Date(u);if(isNaN(r.getTime()))return"Invalid Date";const o=r.getFullYear(),h=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0"),e=String(r.getHours()).padStart(2,"0"),T=String(r.getMinutes()).padStart(2,"0"),R=String(r.getSeconds()).padStart(2,"0");return`${o}-${h}-${a} ${e}:${T}:${R}`}catch(r){return console.warn("날짜 포맷팅 오류:",r),"N/A"}},p=u=>{if(u==null||u<0)return"N/A";const r=Math.floor(u/3600),o=Math.floor(u%3600/60),h=u%60;return r>0?`${r}시간 ${o}분 ${h}초`:o>0?`${o}분 ${h}초`:`${u}초`};return N(()=>{var r;switch((r=n.testResult.status)==null?void 0:r.toLowerCase()){case"completed":return"text-green-300";case"failed":return"text-red-300";case"running":return"text-blue-300";default:return"text-gray-300"}}),(u,r)=>(f(),g("div",ft,[t("div",mt,[r[0]||(r[0]=t("i",{class:"fas fa-chart-bar mr-2 text-gray-600"},null,-1)),r[1]||(r[1]=t("span",{style:{"font-family":"'Pretendard Variable', 'Pretendard', 'Noto Sans KR', sans-serif"}},"테스트 ID:",-1)),t("span",gt,x(s.testResult.testId||"N/A"),1)]),t("div",pt,[t("div",vt,[r[3]||(r[3]=t("i",{class:"fas fa-calendar text-green-600"},null,-1)),t("div",null,[r[2]||(r[2]=t("div",{class:"text-gray-600 text-sm font-medium uppercase",style:{"font-family":"'Inter', 'Pretendard Variable', sans-serif"}},"시작",-1)),t("div",yt,x(l(s.testResult.startTime)),1)])]),t("div",ht,[r[5]||(r[5]=t("i",{class:"fas fa-clock text-red-600"},null,-1)),t("div",null,[r[4]||(r[4]=t("div",{class:"text-gray-600 text-sm font-medium uppercase",style:{"font-family":"'Inter', 'Pretendard Variable', sans-serif"}},"종료",-1)),t("div",bt,x(l(s.testResult.endTime)),1)])]),t("div",xt,[r[7]||(r[7]=t("i",{class:"fas fa-hourglass-half text-yellow-600"},null,-1)),t("div",null,[r[6]||(r[6]=t("div",{class:"text-gray-600 text-sm font-medium uppercase",style:{"font-family":"'Inter', 'Pretendard Variable', sans-serif"}},"소요시간",-1)),t("div",Rt,x(p(s.testResult.actualDurationSeconds)),1)])])])]))}},$t=B(wt,[["__scopeId","data-v-ff37c5f1"]]),Tt={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8"},kt={class:"card-metric mb-2 font-['Inter'] transition-transform group-hover:scale-110"},Ct={class:"metric-card group"},Dt={class:"card-metric mb-2 font-['Inter'] transition-transform group-hover:scale-110"},Nt={class:"metric-card group"},It={class:"card-metric mb-2 font-['Inter'] transition-transform group-hover:scale-110"},St={class:"metric-card group"},At={class:"card-metric mb-2 font-['Inter'] transition-transform group-hover:scale-110"},Mt={class:"metric-card"},_t={class:"card-metric mb-1"},Ut={class:"metric-card group"},Pt={class:"card-metric mb-2 font-['Inter'] transition-transform group-hover:scale-110"},Et={__name:"SummaryMetrics",props:{testResult:{type:Object,required:!0,default:()=>({})}},setup(s){const n=s,l=a=>a==null?"N/A":new Intl.NumberFormat("ko-KR").format(a),p=(a,e=1)=>a==null?"N/A":new Intl.NumberFormat("ko-KR",{minimumFractionDigits:e,maximumFractionDigits:e}).format(a),u=a=>a==null?"N/A":p(a,1)+"%",r=a=>a==null?"N/A":Math.round(a)+"ms",o=a=>a==null?"":a>=95?"success-excellent":a>=90?"success-good":a>=80?"success-warning":"success-poor",h=a=>a==null?"bg-gray-400":a>=95?"bg-green-500":a>=90?"bg-blue-500":a>=80?"bg-yellow-500":"bg-red-500";return N(()=>({totalRequests:n.testResult.totalRequests||0,successRate:n.testResult.successRate||0,avgResponseTime:n.testResult.avgResponseTime||0,maxTps:n.testResult.maxTps||0,p95ResponseTime:n.testResult.p95ResponseTime||0,maxConcurrentUsers:n.testResult.maxConcurrentUsers||0})),(a,e)=>(f(),g("div",Tt,[t("div",{class:V(["metric-card primary group",o(s.testResult.successRate)])},[t("div",kt,x(u(s.testResult.successRate)),1),e[0]||(e[0]=t("div",{class:"card-label"},"성공률",-1)),t("div",{class:V(["metric-indicator",h(s.testResult.successRate)])},null,2)],2),t("div",Ct,[t("div",Dt,x(l(s.testResult.totalRequests)),1),e[1]||(e[1]=t("div",{class:"card-label"},"총 요청 수",-1)),e[2]||(e[2]=t("i",{class:"metric-icon fas fa-exchange-alt text-blue-500"},null,-1))]),t("div",Nt,[t("div",It,x(r(s.testResult.avgResponseTime)),1),e[3]||(e[3]=t("div",{class:"card-label"},"평균 응답시간",-1)),e[4]||(e[4]=t("i",{class:"metric-icon fas fa-clock text-green-500"},null,-1))]),t("div",St,[t("div",At,x(p(s.testResult.maxTps,1)),1),e[5]||(e[5]=t("div",{class:"card-label"},"최대 TPS",-1)),e[6]||(e[6]=t("i",{class:"metric-icon fas fa-tachometer-alt text-purple-500"},null,-1))]),t("div",Mt,[t("div",_t,x(r(s.testResult.p95ResponseTime)),1),e[7]||(e[7]=t("div",{class:"card-label uppercase"},"P95 응답시간",-1))]),t("div",Ut,[t("div",Pt,x(l(s.testResult.maxConcurrentUsers)),1),e[8]||(e[8]=t("div",{class:"card-label"},"최대 동시 사용자",-1)),e[9]||(e[9]=t("i",{class:"metric-icon fas fa-users text-indigo-500"},null,-1))])]))}},Ht=B(Et,[["__scopeId","data-v-a2d307de"]]),Lt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Ft={class:"chart-container"},Kt={class:"chart-wrapper"},Bt={key:0,class:"chart-loading"},Ot={key:1,class:"chart-no-data"},qt=["id"],Vt={class:"chart-container"},Gt={class:"chart-wrapper"},zt={key:0,class:"chart-loading"},jt={key:1,class:"chart-no-data"},Wt=["id"],Jt={key:0,class:"col-span-1 lg:col-span-2 grid grid-cols-1 lg:grid-cols-2 gap-6"},Yt={class:"chart-container"},Zt={class:"chart-wrapper"},Qt=["id"],Xt={class:"chart-container"},te={class:"chart-wrapper"},ee=["id"],se={__name:"ResultCharts",props:{metricsHistory:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showExtendedCharts:{type:Boolean,default:!1}},setup(s){const n=s,l=D(null),p=D(null),u=D(null),r=D(null);let o=null,h=null;const a=Math.random().toString(36).substr(2,9),e=N(()=>n.metricsHistory&&n.metricsHistory.length>0),T=(w,d)=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{font:{size:10,family:"'Noto Sans KR', 'Inter', sans-serif"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:d,borderWidth:1,titleFont:{size:11,family:"'Inter', monospace"},bodyFont:{size:11,family:"'Inter', monospace"}}},scales:{x:{type:"time",time:{unit:"minute",displayFormats:{minute:"HH:mm",hour:"HH:mm",second:"HH:mm"},tooltipFormat:"yyyy-MM-dd HH:mm:ss"},ticks:{source:"data",autoSkip:!0,maxTicksLimit:10,font:{size:10,family:"'Inter', monospace"},callback:function(F){const K=new Date(F),O=String(K.getHours()).padStart(2,"0"),m=String(K.getMinutes()).padStart(2,"0");return`${O}:${m}`}},grid:{color:"rgba(0, 0, 0, 0.1)"}},y:{beginAtZero:!0,title:{display:!0,text:w,color:"#374151",font:{size:10,weight:"bold",family:"'Noto Sans KR', 'Inter', sans-serif"}},ticks:{font:{size:10,family:"'Inter', monospace"}},grid:{color:"rgba(0, 0, 0, 0.1)"}}},elements:{line:{tension:.2},point:{radius:3,hoverRadius:6}}}),R=()=>e.value?{datasets:[{label:"TPS (Transactions Per Second)",data:n.metricsHistory.slice(-300).map(d=>({x:new Date(d.timestamp),y:d.tps||0})).filter(d=>!isNaN(d.x.getTime())),borderColor:"rgb(102, 126, 234)",backgroundColor:"rgba(102, 126, 234, 0.1)",fill:!0,pointBackgroundColor:"rgb(102, 126, 234)",pointBorderColor:"white",pointBorderWidth:2}]}:null,b=()=>e.value?{datasets:[{label:"평균 응답시간 (ms)",data:n.metricsHistory.slice(-300).map(d=>({x:new Date(d.timestamp),y:d.avgResponseTime||0})).filter(d=>!isNaN(d.x.getTime())),borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",fill:!0,pointBackgroundColor:"rgb(147, 51, 234)",pointBorderColor:"white",pointBorderWidth:2}]}:null,U=async()=>{if(!l.value||o)return;await z();const w=R();if(w)try{o=new Chart(l.value,{type:"line",data:w,options:T("Transactions/sec","rgb(102, 126, 234)")})}catch(d){console.error("TPS 차트 생성 오류:",d)}},v=async()=>{if(!p.value||h)return;await z();const w=b();if(w)try{h=new Chart(p.value,{type:"line",data:w,options:T("Response Time (ms)","rgb(147, 51, 234)")})}catch(d){console.error("응답시간 차트 생성 오류:",d)}},P=()=>{if(o){const w=R();w&&(o.data=w,o.update("none"))}if(h){const w=b();w&&(h.data=w,h.update("none"))}},L=()=>{o&&(o.destroy(),o=null),h&&(h.destroy(),h=null)};return q(()=>n.metricsHistory,()=>{!n.loading&&e.value&&P()},{deep:!0}),q(()=>n.loading,w=>{!w&&e.value&&z(()=>{U(),v()})}),Y(()=>{window.Chart&&(Chart.defaults.font.family="'Inter', 'Noto Sans KR', sans-serif",Chart.defaults.font.size=10,Chart.defaults.color="#374151",Chart.defaults.font.variant="tabular-nums"),!n.loading&&e.value&&z(()=>{U(),v()})}),nt(()=>{L()}),(w,d)=>(f(),g("div",Lt,[t("div",Ft,[d[2]||(d[2]=t("h3",{class:"chart-title text-sm"},[t("i",{class:"fas fa-chart-line mr-2 text-gray-600 text-sm"}),t("span",null,"TPS 추이")],-1)),t("div",Kt,[s.loading?(f(),g("div",Bt,[...d[0]||(d[0]=[t("i",{class:"fas fa-spinner fa-spin text-2xl text-indigo-500 mb-2"},null,-1),t("p",{class:"text-gray-600"},"차트 로딩 중...",-1)])])):e.value?(f(),g("canvas",{key:2,ref_key:"tpsChartRef",ref:l,id:"tps-chart-"+I(a)},null,8,qt)):(f(),g("div",Ot,[...d[1]||(d[1]=[t("i",{class:"fas fa-chart-line text-gray-400 text-3xl mb-2"},null,-1),t("p",{class:"text-gray-500"},"표시할 데이터가 없습니다",-1)])]))])]),t("div",Vt,[d[5]||(d[5]=t("h3",{class:"chart-title text-sm"},[t("i",{class:"fas fa-chart-area mr-2 text-gray-600 text-sm"}),t("span",null,"응답시간 추이")],-1)),t("div",Gt,[s.loading?(f(),g("div",zt,[...d[3]||(d[3]=[t("i",{class:"fas fa-spinner fa-spin text-2xl text-purple-500 mb-2"},null,-1),t("p",{class:"text-gray-600"},"차트 로딩 중...",-1)])])):e.value?(f(),g("canvas",{key:2,ref_key:"responseTimeChartRef",ref:p,id:"response-time-chart-"+I(a)},null,8,Wt)):(f(),g("div",jt,[...d[4]||(d[4]=[t("i",{class:"fas fa-chart-area text-gray-400 text-3xl mb-2"},null,-1),t("p",{class:"text-gray-500"},"표시할 데이터가 없습니다",-1)])]))])]),s.showExtendedCharts?(f(),g("div",Jt,[t("div",Yt,[d[6]||(d[6]=t("h3",{class:"chart-title text-sm"},[t("i",{class:"fas fa-exclamation-triangle mr-2 text-red-500 text-sm"}),t("span",{class:"font-['Noto Sans KR']"},"에러율 추이")],-1)),t("div",Zt,[t("canvas",{ref_key:"errorRateChartRef",ref:u,id:"error-rate-chart-"+I(a)},null,8,Qt)])]),t("div",Xt,[d[7]||(d[7]=t("h3",{class:"chart-title text-sm"},[t("i",{class:"fas fa-users mr-2 text-blue-500 text-sm"}),t("span",{class:"font-['Noto Sans KR']"},"동시 사용자 추이")],-1)),t("div",te,[t("canvas",{ref_key:"usersChartRef",ref:r,id:"users-chart-"+I(a)},null,8,ee)])])])):M("",!0)]))}},ae=B(se,[["__scopeId","data-v-5d84200f"]]),re={class:"flat-card p-4 mb-4"},le={class:"overflow-x-auto"},ne={class:"detail-table"},oe={class:"table-cell"},ie={class:"font-medium"},ue={class:"table-cell font-mono"},ce={class:"table-cell"},de={class:"table-cell font-mono"},fe={key:0},me={class:"table-cell"},ge={key:1},pe={class:"table-cell"},ve={key:2},ye={class:"table-cell"},he={class:"text-gray-700"},be={key:3,class:"error-row"},xe={class:"table-cell"},Re={class:"error-message"},we={class:"text-red-600 font-medium"},$e={key:4},Te={class:"table-cell font-mono"},ke={key:5},Ce={class:"table-cell font-mono"},De={key:0,class:"mt-6 pt-6 border-t border-gray-200"},Ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Ie={key:0,class:"info-item"},Se={class:"info-value"},Ae={key:1,class:"info-item"},Me={class:"info-value"},_e={key:2,class:"info-item"},Ue={class:"flex flex-wrap gap-1 mt-1"},Pe={__name:"DetailTable",props:{testResult:{type:Object,required:!0,default:()=>({})}},setup(s){const n=s,l=a=>a==null?"N/A":new Intl.NumberFormat("ko-KR").format(a),p=a=>{if(!a)return"N/A";try{const e=new Date(a);return isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(e)}catch(e){return console.warn("날짜 포맷팅 오류:",e),"N/A"}},u=a=>({COMPLETED:"완료",RUNNING:"실행 중",FAILED:"실패",PENDING:"대기 중",CANCELLED:"취소됨"})[a==null?void 0:a.toUpperCase()]||a||"N/A",r=a=>{const e="status-badge";switch(a==null?void 0:a.toLowerCase()){case"completed":return`${e} status-completed`;case"running":return`${e} status-running`;case"failed":return`${e} status-failed`;case"pending":return`${e} status-pending`;case"cancelled":return`${e} status-cancelled`;default:return`${e} status-unknown`}},o=a=>{switch(a==null?void 0:a.toLowerCase()){case"completed":return"fas fa-check-circle";case"running":return"fas fa-spinner fa-spin";case"failed":return"fas fa-times-circle";case"pending":return"fas fa-clock";case"cancelled":return"fas fa-ban";default:return"fas fa-question-circle"}},h=N(()=>{const a=n.testResult;return a.version||a.environment||a.tags&&a.tags.length>0});return(a,e)=>(f(),g("div",re,[e[15]||(e[15]=t("h3",{class:"table-title"},[t("i",{class:"fas fa-list-alt mr-2 text-gray-600"}),t("span",null,"테스트 상세 정보")],-1)),t("div",le,[t("table",ne,[t("tbody",null,[t("tr",null,[e[0]||(e[0]=t("th",{class:"table-header"},[t("i",{class:"fas fa-tag mr-2 text-gray-500"}),S(" 테스트 이름 ")],-1)),t("td",oe,[t("span",ie,x(s.testResult.testName||"N/A"),1)])]),t("tr",null,[e[1]||(e[1]=t("th",{class:"table-header"},[t("i",{class:"fas fa-clipboard mr-2 text-gray-500"}),S(" Plan ID ")],-1)),t("td",ue,x(s.testResult.planId||"N/A"),1)]),t("tr",null,[e[2]||(e[2]=t("th",{class:"table-header"},[t("i",{class:"fas fa-info-circle mr-2 text-gray-500"}),S(" 상태 ")],-1)),t("td",ce,[t("span",{class:V([r(s.testResult.status),"status-badge"])},[t("i",{class:V([o(s.testResult.status),"mr-1"])},null,2),S(" "+x(u(s.testResult.status)),1)],2)])]),t("tr",null,[e[3]||(e[3]=t("th",{class:"table-header"},[t("i",{class:"fas fa-users mr-2 text-gray-500"}),S(" 최대 동시 사용자 ")],-1)),t("td",de,x(l(s.testResult.maxConcurrentUsers)),1)]),s.testResult.testType?(f(),g("tr",fe,[e[4]||(e[4]=t("th",{class:"table-header"},[t("i",{class:"fas fa-cog mr-2 text-gray-500"}),S(" 테스트 유형 ")],-1)),t("td",me,x(s.testResult.testType),1)])):M("",!0),s.testResult.scenario?(f(),g("tr",ge,[e[5]||(e[5]=t("th",{class:"table-header"},[t("i",{class:"fas fa-play mr-2 text-gray-500"}),S(" 시나리오 ")],-1)),t("td",pe,x(s.testResult.scenario),1)])):M("",!0),s.testResult.description?(f(),g("tr",ve,[e[6]||(e[6]=t("th",{class:"table-header"},[t("i",{class:"fas fa-file-alt mr-2 text-gray-500"}),S(" 설명 ")],-1)),t("td",ye,[t("span",he,x(s.testResult.description),1)])])):M("",!0),s.testResult.errorMessage?(f(),g("tr",be,[e[8]||(e[8]=t("th",{class:"table-header text-red-700"},[t("i",{class:"fas fa-exclamation-triangle mr-2 text-red-500"}),S(" 에러 메시지 ")],-1)),t("td",xe,[t("div",Re,[e[7]||(e[7]=t("i",{class:"fas fa-times-circle text-red-500 mr-2"},null,-1)),t("span",we,x(s.testResult.errorMessage),1)])])])):M("",!0),s.testResult.createdAt?(f(),g("tr",$e,[e[9]||(e[9]=t("th",{class:"table-header"},[t("i",{class:"fas fa-calendar-plus mr-2 text-gray-500"}),S(" 생성 일시 ")],-1)),t("td",Te,x(p(s.testResult.createdAt)),1)])):M("",!0),s.testResult.updatedAt?(f(),g("tr",ke,[e[10]||(e[10]=t("th",{class:"table-header"},[t("i",{class:"fas fa-calendar-check mr-2 text-gray-500"}),S(" 수정 일시 ")],-1)),t("td",Ce,x(p(s.testResult.updatedAt)),1)])):M("",!0)])])]),h.value?(f(),g("div",De,[e[14]||(e[14]=t("h4",{class:"text-base font-semibold text-gray-800 mb-2"},[t("i",{class:"fas fa-info mr-2 text-gray-600"}),S(" 추가 정보 ")],-1)),t("div",Ne,[s.testResult.version?(f(),g("div",Ie,[e[11]||(e[11]=t("span",{class:"info-label"},"버전:",-1)),t("span",Se,x(s.testResult.version),1)])):M("",!0),s.testResult.environment?(f(),g("div",Ae,[e[12]||(e[12]=t("span",{class:"info-label"},"환경:",-1)),t("span",Me,x(s.testResult.environment),1)])):M("",!0),s.testResult.tags&&s.testResult.tags.length>0?(f(),g("div",_e,[e[13]||(e[13]=t("span",{class:"info-label"},"태그:",-1)),t("div",Ue,[(f(!0),g(Z,null,Q(s.testResult.tags,T=>(f(),g("span",{key:T,class:"inline-block bg-gray-100 text-gray-700 px-2 py-1 border border-gray-200 text-xs"},x(T),1))),128))])])):M("",!0)])])):M("",!0)]))}},Ee=B(Pe,[["__scopeId","data-v-f533e089"]]),He={class:"text-center mt-4"},Le={key:0,class:"report-link-container"},Fe=["href"],Ke={key:1,class:"report-generating"},Be={key:2,class:"report-unavailable"},Oe=["disabled"],qe={key:3,class:"report-loading"},Ve={__name:"GatlingReportLink",props:{reportUrl:{type:String,default:null},testId:{type:String,default:null},testStatus:{type:String,default:"COMPLETED"},allowRegenerate:{type:Boolean,default:!1}},emits:["report-clicked","regenerate-requested"],setup(s,{emit:n}){const l=s,p=n,u=D(!1),r=D(!1),o=D(!1),h=D(!1);N(()=>l.testStatus==="COMPLETED"&&!l.reportUrl&&!o.value);const a=R=>{p("report-clicked",{url:l.reportUrl,testId:l.testId,timestamp:new Date().toISOString()}),window.gtag&&window.gtag("event","gatling_report_click",{test_id:l.testId,report_url:l.reportUrl}),console.log("Gatling 리포트 열기:",l.reportUrl)},e=async()=>{if(!r.value){r.value=!0;try{p("regenerate-requested",l.testId),setTimeout(()=>{u.value=!0,o.value=!1},500)}catch(R){console.error("리포트 재생성 요청 오류:",R)}finally{r.value=!1}}},T=async R=>{if(!R)return!1;try{const b=await fetch(R,{method:"HEAD",mode:"no-cors"});return!0}catch(b){return console.warn("리포트 링크 검증 실패:",b),!0}};return q(()=>l.reportUrl,async R=>{R?(h.value=await T(R),o.value=!1,u.value=!1):l.testStatus==="COMPLETED"&&setTimeout(()=>{l.reportUrl||(o.value=!0,u.value=!1)},3e3)}),q(()=>l.testStatus,R=>{R==="COMPLETED"&&!l.reportUrl&&(u.value=!0,o.value=!1)}),Y(()=>{l.reportUrl?T(l.reportUrl):l.testStatus==="COMPLETED"&&(u.value=!0,setTimeout(()=>{l.reportUrl||(u.value=!1,o.value=!0)},5e3))}),(R,b)=>(f(),g("div",He,[s.reportUrl?(f(),g("div",Le,[t("a",{href:s.reportUrl,target:"_blank",rel:"noopener noreferrer",class:"report-link",onClick:a},[...b[0]||(b[0]=[t("i",{class:"fas fa-external-link-alt mr-2"},null,-1),t("span",{class:"text-sm"},"Gatling 상세 리포트 보기",-1),t("i",{class:"fas fa-chart-line ml-2 text-white"},null,-1)])],8,Fe),b[1]||(b[1]=t("p",{class:"report-info"},[t("i",{class:"fas fa-info-circle mr-1 text-gray-500"}),S(" 새 창에서 상세한 성능 분석 리포트를 확인할 수 있습니다 ")],-1))])):u.value?(f(),g("div",Ke,[...b[2]||(b[2]=[X('<div class="flex items-center justify-center mb-4" data-v-2adfda1e><i class="fas fa-cog fa-spin text-xl text-gray-600 mr-2" data-v-2adfda1e></i><span class="text-base font-semibold text-gray-700" data-v-2adfda1e>리포트 생성 중...</span></div><p class="text-gray-600" data-v-2adfda1e> Gatling 리포트를 생성하고 있습니다. 잠시만 기다려주세요. </p><div class="progress-bar" data-v-2adfda1e><div class="progress-fill" data-v-2adfda1e></div></div>',3)])])):o.value?(f(),g("div",Be,[b[3]||(b[3]=t("div",{class:"flex items-center justify-center mb-4"},[t("i",{class:"fas fa-file-slash text-xl text-gray-400 mr-2"}),t("span",{class:"text-base font-semibold text-gray-600"},"리포트를 사용할 수 없음")],-1)),b[4]||(b[4]=t("p",{class:"text-gray-500 mb-4"}," 이 테스트에 대한 Gatling 리포트가 생성되지 않았거나 삭제되었습니다. ",-1)),s.allowRegenerate?(f(),g("button",{key:0,onClick:e,disabled:r.value,class:"btn-regenerate"},[t("i",{class:V([r.value?"fas fa-spinner fa-spin":"fas fa-redo","mr-2"])},null,2),S(" "+x(r.value?"재생성 중...":"리포트 재생성"),1)],8,Oe)):M("",!0)])):(f(),g("div",qe,[...b[5]||(b[5]=[t("i",{class:"fas fa-spinner fa-spin text-xl text-gray-400"},null,-1)])]))]))}},Ge=B(Ve,[["__scopeId","data-v-2adfda1e"]]),ze={class:"min-h-screen bg-gray-50"},je={key:0,class:"space-y-8"},We={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4"},Je={key:1,class:"bg-red-50 border border-red-200 p-6 text-center"},Ye={class:"text-base text-red-600 mb-4"},Ze={key:2},Qe={key:3,class:"bg-yellow-50 border border-yellow-200 p-6 text-center"},Xe={__name:"App",setup(s){const n=new URLSearchParams(window.location.search),l=D(n.get("testId")||null),{testResult:p,metricsHistory:u,reportUrl:r,loading:o,chartsLoading:h,error:a,hasData:e,loadResults:T,loadMetricsHistory:R,loadReportUrl:b}=dt();return Y(async()=>{var U;if(console.log("Results App mounted with testId:",l.value),console.log("Initial state - loading:",o.value,"error:",a.value,"testResult:",p.value,"hasData:",e.value),!l.value){a.value="테스트 ID가 제공되지 않았습니다.";return}try{console.log("Loading test results for:",l.value),await T(l.value),console.log("After loadResults - loading:",o.value,"error:",a.value,"hasData:",e.value),console.log("Test result loaded:",p.value),console.log("Test result has testId:",(U=p.value)==null?void 0:U.testId),await Promise.all([R(l.value),b(l.value)]),console.log("All data loaded successfully"),console.log("Final state - loading:",o.value,"error:",a.value,"hasData:",e.value)}catch(v){console.error("결과 로드 실패:",v),a.value=v.message||"결과를 불러오는데 실패했습니다."}}),(U,v)=>(f(),g("div",ze,[v[7]||(v[7]=X('<div class="flex justify-between items-center mb-6" data-v-299f5175><h1 class="text-3xl font-bold text-gray-900" data-v-299f5175>테스트 결과 상세</h1><a href="/performance/dashboard" class="btn btn-secondary" data-v-299f5175><i class="fas fa-arrow-left mr-2" data-v-299f5175></i><span class="text-sm" data-v-299f5175>대시보드로</span></a></div>',1)),I(o)?(f(),g("div",je,[v[1]||(v[1]=t("div",{class:"bg-gray-200 animate-pulse h-32 border border-gray-300"},null,-1)),t("div",We,[(f(),g(Z,null,Q(6,P=>t("div",{key:P,class:"bg-gray-200 animate-pulse h-24 border border-gray-300"})),64))]),v[2]||(v[2]=t("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},[t("div",{class:"bg-gray-200 animate-pulse h-80 border border-gray-300"}),t("div",{class:"bg-gray-200 animate-pulse h-80 border border-gray-300"})],-1))])):I(a)?(f(),g("div",Je,[v[4]||(v[4]=t("i",{class:"fas fa-exclamation-triangle text-red-500 text-4xl mb-4"},null,-1)),v[5]||(v[5]=t("h3",{class:"text-xl font-semibold text-red-800 mb-2"},"결과 로드 실패",-1)),t("p",Ye,x(I(a)),1),t("button",{onClick:v[0]||(v[0]=(...P)=>I(T)&&I(T)(...P)),class:"btn btn-primary"},[...v[3]||(v[3]=[t("i",{class:"fas fa-redo mr-2"},null,-1),t("span",{class:"text-sm"},"다시 시도",-1)])])])):I(e)?(f(),g("div",Ze,[j($t,{"test-result":I(p)},null,8,["test-result"]),j(Ht,{"test-result":I(p)},null,8,["test-result"]),j(ae,{"metrics-history":I(u),loading:I(h)},null,8,["metrics-history","loading"]),j(Ee,{"test-result":I(p)},null,8,["test-result"]),I(r)?(f(),ot(Ge,{key:0,"report-url":I(r)},null,8,["report-url"])):M("",!0)])):(f(),g("div",Qe,[...v[6]||(v[6]=[t("i",{class:"fas fa-search text-yellow-500 text-4xl mb-4"},null,-1),t("h3",{class:"text-xl font-semibold text-yellow-800 mb-2"},"결과를 찾을 수 없습니다",-1),t("p",{class:"text-base text-yellow-600"},"요청하신 테스트 결과가 존재하지 않습니다.",-1)])]))]))}},ts=B(Xe,[["__scopeId","data-v-299f5175"]]),es=it(),G=ut(ts);G.use(es);G.config.errorHandler=(s,n,l)=>{console.error("Vue 앱 에러:",s,l),window.showNotification&&window.showNotification("앱 오류가 발생했습니다.","error")};G.config.globalProperties.$formatNumber=(s,n=0)=>s==null?"N/A":new Intl.NumberFormat("ko-KR",{minimumFractionDigits:n,maximumFractionDigits:n}).format(s);G.config.globalProperties.$formatDateTime=(s,n="full")=>{if(!s)return"N/A";const l=new Date(s);if(isNaN(l.getTime()))return"Invalid Date";const p={full:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},short:{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},time:{hour:"2-digit",minute:"2-digit",hour12:!1}};return new Intl.DateTimeFormat("ko-KR",p[n]||p.full).format(l)};G.mount("#app");
