import{D as at,h as N,i as D,C as Z,H as rt,z as q,_ as B,c as g,a as f,b as t,t as x,n as G,o as J,A as V,l as lt,d as _,u as I,k as S,F as Q,f as X,j as nt,p as j,I as ot,s as it,q as ut}from"./chunks/_plugin-vue_export-helper-3-HUlo0i.js";const ct=at("testResults",()=>{const s=N(null),n=N([]),r=N(null),p=N(!1),u=N(!1),l=N(null),i=N(new Map),b=5*60*1e3,a=D(()=>!!s.value),e=D(()=>n.value.length>0),C=D(()=>!!l.value),T=D(()=>{var m,y;return((y=(m=s.value)==null?void 0:m.status)==null?void 0:y.toUpperCase())||"UNKNOWN"}),h=D(()=>T.value==="COMPLETED"),U=D(()=>s.value?{successRate:s.value.successRate||0,totalRequests:s.value.totalRequests||0,avgResponseTime:s.value.avgResponseTime||0,maxTps:s.value.maxTps||0,p95ResponseTime:s.value.p95ResponseTime||0,maxConcurrentUsers:s.value.maxConcurrentUsers||0,duration:s.value.actualDurationSeconds||0}:null),v=async(m,y=!0)=>{var w,M;if(!m)throw new Error("테스트 ID가 필요합니다.");const $=`result_${m}`;if(y&&i.value.has($)){const k=i.value.get($);if(Date.now()-k.timestamp<b)return s.value=k.data,k.data}p.value=!0,l.value=null;try{console.log("Fetching test result from API for:",m);const k=await Z.get(`/tests/${m}/result`);if(console.log("API Response received:",k),!k||!k.testId)throw console.error("Invalid data structure:",k),new Error("유효하지 않은 테스트 결과 데이터입니다.");return s.value=k,console.log("Test result stored in state:",s.value),i.value.set($,{data:k,timestamp:Date.now()}),k}catch(k){const H=((M=(w=k.response)==null?void 0:w.data)==null?void 0:M.message)||k.message||"테스트 결과를 불러오는데 실패했습니다.";throw l.value=H,new Error(H)}finally{p.value=!1}},E=async(m,y=!0)=>{if(!m)throw new Error("테스트 ID가 필요합니다.");const $=`metrics_${m}`;if(y&&i.value.has($)){const w=i.value.get($);if(Date.now()-w.timestamp<b)return n.value=w.data,w.data}u.value=!0;try{const M=(await Z.get(`/tests/${m}/metrics`)||[]).filter(k=>k.timestamp&&!isNaN(new Date(k.timestamp).getTime())).sort((k,H)=>new Date(k.timestamp)-new Date(H.timestamp)).slice(-500);return n.value=M,i.value.set($,{data:M,timestamp:Date.now()}),M}catch(w){return console.warn("메트릭 히스토리 로드 실패:",w),n.value=[],[]}finally{u.value=!1}},L=async m=>{if(!m)return null;try{const y=await Z.get(`/tests/${m}/report-url`),$=(y==null?void 0:y.reportUrl)||(y==null?void 0:y.url);return r.value=$,$}catch(y){return console.warn("리포트 URL 조회 실패:",y),r.value=null,null}},R=async m=>{if(!m)throw new Error("테스트 ID가 필요합니다.");try{await v(m),await Promise.allSettled([E(m),L(m)])}catch(y){throw y}},d=async m=>{[`result_${m}`,`metrics_${m}`].forEach($=>i.value.delete($)),await R(m)},F=()=>{s.value=null,n.value=[],r.value=null,p.value=!1,u.value=!1,l.value=null},K=(m=null)=>{m?[`result_${m}`,`metrics_${m}`].forEach($=>i.value.delete($)):i.value.clear()},O=D(()=>{if(!e.value)return null;const m=n.value,y=m.map(w=>w.tps||0).filter(w=>w>0),$=m.map(w=>w.avgResponseTime||0).filter(w=>w>0);return y.length===0?null:{avgTps:y.reduce((w,M)=>w+M,0)/y.length,maxTps:Math.max(...y),minTps:Math.min(...y),avgResponseTime:$.reduce((w,M)=>w+M,0)/$.length,maxResponseTime:Math.max(...$),minResponseTime:Math.min(...$),dataPoints:m.length}});return{testResult:s,metricsHistory:n,reportUrl:r,loading:p,chartsLoading:u,error:l,hasData:a,hasMetrics:e,hasError:C,testStatus:T,isCompleted:h,summary:U,getStatistics:O,fetchTestResult:v,fetchMetricsHistory:E,fetchReportUrl:L,loadAllData:R,refresh:d,reset:F,clearCache:K}});function dt(){const s=ct(),n=N(!1),r=N(null),{testResult:p,metricsHistory:u,reportUrl:l,loading:i,chartsLoading:b,error:a,hasData:e,hasMetrics:C,hasError:T,testStatus:h,isCompleted:U,summary:v}=rt(s),E=D(()=>C.value?{datasets:[{label:"TPS (Transactions Per Second)",data:u.value.slice(-300).map(c=>({x:new Date(c.timestamp),y:c.tps||0})).filter(c=>!isNaN(c.x.getTime())),borderColor:"rgb(102, 126, 234)",backgroundColor:"rgba(102, 126, 234, 0.1)",fill:!0,tension:.2,pointRadius:2,pointHoverRadius:4}]}:null),L=D(()=>C.value?{datasets:[{label:"평균 응답시간 (ms)",data:u.value.slice(-300).map(c=>({x:new Date(c.timestamp),y:c.avgResponseTime||0})).filter(c=>!isNaN(c.x.getTime())),borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",fill:!0,tension:.2,pointRadius:2,pointHoverRadius:4}]}:null),R=D(()=>C.value?{datasets:[{label:"에러율 (%)",data:u.value.slice(-300).map(c=>{const A=c.totalRequests||0,P=c.errorCount||0;return{x:new Date(c.timestamp),y:A>0?P/A*100:0}}).filter(c=>!isNaN(c.x.getTime())),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!0,tension:.2,pointRadius:2,pointHoverRadius:4}]}:null),d=D(()=>C.value?{datasets:[{label:"동시 사용자 수",data:u.value.slice(-300).map(c=>({x:new Date(c.timestamp),y:c.activeUsers||0})).filter(c=>!isNaN(c.x.getTime())),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.2,pointRadius:2,pointHoverRadius:4}]}:null),F=(o,c=0)=>o==null?"N/A":new Intl.NumberFormat("ko-KR",{minimumFractionDigits:c,maximumFractionDigits:c}).format(o),K=(o,c=1)=>o==null?"N/A":F(o,c)+"%",O=o=>o==null?"N/A":Math.round(o)+"ms",m=o=>{if(o==null||o<0)return"N/A";const c=Math.floor(o/3600),A=Math.floor(o%3600/60),P=o%60;return c>0?`${c}시간 ${A}분 ${P}초`:A>0?`${A}분 ${P}초`:`${o}초`},y=(o,c="full")=>{if(!o)return"N/A";try{const A=new Date(o);if(isNaN(A.getTime()))return"Invalid Date";const P={full:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},short:{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},time:{hour:"2-digit",minute:"2-digit",hour12:!1}};return new Intl.DateTimeFormat("ko-KR",P[c]||P.full).format(A)}catch(A){return console.warn("날짜 포맷팅 오류:",A),"N/A"}},$=async o=>await s.fetchTestResult(o),w=async o=>await s.fetchMetricsHistory(o),M=async o=>await s.fetchReportUrl(o),k=async o=>await s.loadAllData(o),H=async o=>await s.refresh(o),Y=(o,c=30)=>{r.value&&clearInterval(r.value),n.value=!0,r.value=setInterval(async()=>{try{await H(o)}catch(A){console.warn("자동 새로고침 실패:",A)}},c*1e3)},W=()=>{r.value&&(clearInterval(r.value),r.value=null),n.value=!1},tt=D(()=>s.getStatistics.value),et=D(()=>{if(!v.value)return null;const{successRate:o,avgResponseTime:c}=v.value;return o>=99&&c<=100?"A+":o>=98&&c<=200?"A":o>=95&&c<=500?"B":o>=90&&c<=1e3?"C":"D"}),st=()=>{W(),s.reset()};return q(h,o=>{o==="RUNNING"&&!n.value?console.log("실행 중인 테스트 감지 - 자동 새로고침 가능"):o==="COMPLETED"&&n.value&&W()}),{testResult:p,metricsHistory:u,reportUrl:l,loading:i,chartsLoading:b,error:a,hasData:e,hasMetrics:C,hasError:T,testStatus:h,isCompleted:U,summary:v,statistics:tt,tpsChartData:E,responseTimeChartData:L,errorRateChartData:R,activeUsersChartData:d,formatNumber:F,formatPercentage:K,formatResponseTime:O,formatDuration:m,formatDateTime:y,loadResults:$,loadMetricsHistory:w,loadReportUrl:M,loadAllData:k,refresh:H,autoRefresh:n,startAutoRefresh:Y,stopAutoRefresh:W,performanceGrade:et,cleanup:st}}const ft={class:"bg-white border border-gray-200 p-4 mb-4"},mt={class:"text-lg font-bold mb-3 text-gray-900"},gt={class:"font-mono text-blue-600 ml-2"},pt={class:"grid grid-cols-1 md:grid-cols-3 gap-2 mt-3 text-sm"},vt={class:"flex items-center gap-2 bg-gray-50 p-2 border border-gray-200"},yt={class:"font-mono text-gray-900"},ht={class:"flex items-center gap-2 bg-gray-50 p-2 border border-gray-200"},xt={class:"font-mono text-gray-900"},bt={class:"flex items-center gap-2 bg-gray-50 p-2 border border-gray-200"},Rt={class:"font-mono font-semibold text-gray-900"},wt={__name:"ResultsHeader",props:{testResult:{type:Object,required:!0,default:()=>({})}},setup(s){const n=s,r=u=>{if(!u)return"N/A";try{const l=new Date(u);return isNaN(l.getTime())?"Invalid Date":new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(l).replace(/\. /g,"-").replace(".","")}catch(l){return console.warn("날짜 포맷팅 오류:",l),"N/A"}},p=u=>{if(u==null||u<0)return"N/A";const l=Math.floor(u/3600),i=Math.floor(u%3600/60),b=u%60;return l>0?`${l}시간 ${i}분 ${b}초`:i>0?`${i}분 ${b}초`:`${u}초`};return D(()=>{var l;switch((l=n.testResult.status)==null?void 0:l.toLowerCase()){case"completed":return"text-green-300";case"failed":return"text-red-300";case"running":return"text-blue-300";default:return"text-gray-300"}}),(u,l)=>(f(),g("div",ft,[t("div",mt,[l[0]||(l[0]=t("i",{class:"fas fa-chart-bar mr-2 text-gray-600"},null,-1)),l[1]||(l[1]=t("span",null,"테스트 ID:",-1)),t("span",gt,x(s.testResult.testId||"N/A"),1)]),t("div",pt,[t("div",vt,[l[3]||(l[3]=t("i",{class:"fas fa-calendar text-green-600 text-sm"},null,-1)),t("div",null,[l[2]||(l[2]=t("div",{class:"text-gray-600 text-xs font-medium uppercase"},"시작",-1)),t("div",yt,x(r(s.testResult.startTime)),1)])]),t("div",ht,[l[5]||(l[5]=t("i",{class:"fas fa-clock text-red-600 text-sm"},null,-1)),t("div",null,[l[4]||(l[4]=t("div",{class:"text-gray-600 text-xs font-medium uppercase"},"종료",-1)),t("div",xt,x(r(s.testResult.endTime)),1)])]),t("div",bt,[l[7]||(l[7]=t("i",{class:"fas fa-hourglass-half text-yellow-600 text-sm"},null,-1)),t("div",null,[l[6]||(l[6]=t("div",{class:"text-gray-600 text-xs font-medium uppercase"},"소요시간",-1)),t("div",Rt,x(p(s.testResult.actualDurationSeconds)),1)])])])]))}},Tt=B(wt,[["__scopeId","data-v-3d2261e5"]]),$t={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8"},kt={class:"text-3xl font-bold text-gray-900 mb-2 font-['Inter'] transition-transform group-hover:scale-110"},Ct={class:"metric-card group"},Nt={class:"text-3xl font-bold text-gray-900 mb-2 font-['Inter'] transition-transform group-hover:scale-110"},Dt={class:"metric-card group"},It={class:"text-3xl font-bold text-gray-900 mb-2 font-['Inter'] transition-transform group-hover:scale-110"},St={class:"metric-card group"},At={class:"text-3xl font-bold text-gray-900 mb-2 font-['Inter'] transition-transform group-hover:scale-110"},_t={class:"metric-card"},Mt={class:"text-2xl font-bold text-gray-900 mb-1"},Ut={class:"metric-card group"},Et={class:"text-3xl font-bold text-gray-900 mb-2 font-['Inter'] transition-transform group-hover:scale-110"},Ht={__name:"SummaryMetrics",props:{testResult:{type:Object,required:!0,default:()=>({})}},setup(s){const n=s,r=a=>a==null?"N/A":new Intl.NumberFormat("ko-KR").format(a),p=(a,e=1)=>a==null?"N/A":new Intl.NumberFormat("ko-KR",{minimumFractionDigits:e,maximumFractionDigits:e}).format(a),u=a=>a==null?"N/A":p(a,1)+"%",l=a=>a==null?"N/A":Math.round(a)+"ms",i=a=>a==null?"":a>=95?"success-excellent":a>=90?"success-good":a>=80?"success-warning":"success-poor",b=a=>a==null?"bg-gray-400":a>=95?"bg-green-500":a>=90?"bg-blue-500":a>=80?"bg-yellow-500":"bg-red-500";return D(()=>({totalRequests:n.testResult.totalRequests||0,successRate:n.testResult.successRate||0,avgResponseTime:n.testResult.avgResponseTime||0,maxTps:n.testResult.maxTps||0,p95ResponseTime:n.testResult.p95ResponseTime||0,maxConcurrentUsers:n.testResult.maxConcurrentUsers||0})),(a,e)=>(f(),g("div",$t,[t("div",{class:G(["metric-card primary group",i(s.testResult.successRate)])},[t("div",kt,x(u(s.testResult.successRate)),1),e[0]||(e[0]=t("div",{class:"text-gray-800 font-semibold text-sm font-['Noto Sans KR']"},"성공률",-1)),t("div",{class:G(["metric-indicator",b(s.testResult.successRate)])},null,2)],2),t("div",Ct,[t("div",Nt,x(r(s.testResult.totalRequests)),1),e[1]||(e[1]=t("div",{class:"text-gray-800 font-semibold text-sm font-['Noto Sans KR']"},"총 요청 수",-1)),e[2]||(e[2]=t("i",{class:"metric-icon fas fa-exchange-alt text-blue-500"},null,-1))]),t("div",Dt,[t("div",It,x(l(s.testResult.avgResponseTime)),1),e[3]||(e[3]=t("div",{class:"text-gray-800 font-semibold text-sm font-['Noto Sans KR']"},"평균 응답시간",-1)),e[4]||(e[4]=t("i",{class:"metric-icon fas fa-clock text-green-500"},null,-1))]),t("div",St,[t("div",At,x(p(s.testResult.maxTps,1)),1),e[5]||(e[5]=t("div",{class:"text-gray-800 font-semibold text-sm font-['Noto Sans KR']"},"최대 TPS",-1)),e[6]||(e[6]=t("i",{class:"metric-icon fas fa-tachometer-alt text-purple-500"},null,-1))]),t("div",_t,[t("div",Mt,x(l(s.testResult.p95ResponseTime)),1),e[7]||(e[7]=t("div",{class:"text-gray-600 font-semibold text-xs uppercase"},"P95 응답시간",-1))]),t("div",Ut,[t("div",Et,x(r(s.testResult.maxConcurrentUsers)),1),e[8]||(e[8]=t("div",{class:"text-gray-800 font-semibold text-sm font-['Noto Sans KR']"},"최대 동시 사용자",-1)),e[9]||(e[9]=t("i",{class:"metric-icon fas fa-users text-indigo-500"},null,-1))])]))}},Pt=B(Ht,[["__scopeId","data-v-ce3c0a7d"]]),Lt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Ft={class:"chart-container"},Kt={class:"chart-wrapper"},Bt={key:0,class:"chart-loading"},Ot={key:1,class:"chart-no-data"},qt=["id"],Gt={class:"chart-container"},zt={class:"chart-wrapper"},Vt={key:0,class:"chart-loading"},jt={key:1,class:"chart-no-data"},Wt=["id"],Zt={key:0,class:"col-span-1 lg:col-span-2 grid grid-cols-1 lg:grid-cols-2 gap-6"},Jt={class:"chart-container"},Qt={class:"chart-wrapper"},Xt=["id"],Yt={class:"chart-container"},te={class:"chart-wrapper"},ee=["id"],se={__name:"ResultCharts",props:{metricsHistory:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showExtendedCharts:{type:Boolean,default:!1}},setup(s){const n=s,r=N(null),p=N(null),u=N(null),l=N(null);let i=null,b=null;const a=Math.random().toString(36).substr(2,9),e=D(()=>n.metricsHistory&&n.metricsHistory.length>0),C=(R,d)=>({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{font:{size:10,family:"'Noto Sans KR', 'Inter', sans-serif"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:d,borderWidth:1,titleFont:{size:11,family:"'Inter', monospace"},bodyFont:{size:11,family:"'Inter', monospace"}}},scales:{x:{type:"time",time:{unit:"minute",displayFormats:{minute:"HH:mm",hour:"HH:mm",second:"HH:mm"},tooltipFormat:"yyyy-MM-dd HH:mm:ss"},ticks:{source:"data",autoSkip:!0,maxTicksLimit:10,font:{size:10,family:"'Inter', monospace"},callback:function(F){const K=new Date(F),O=String(K.getHours()).padStart(2,"0"),m=String(K.getMinutes()).padStart(2,"0");return`${O}:${m}`}},grid:{color:"rgba(0, 0, 0, 0.1)"}},y:{beginAtZero:!0,title:{display:!0,text:R,color:"#374151",font:{size:10,weight:"bold",family:"'Noto Sans KR', 'Inter', sans-serif"}},ticks:{font:{size:10,family:"'Inter', monospace"}},grid:{color:"rgba(0, 0, 0, 0.1)"}}},elements:{line:{tension:.2},point:{radius:3,hoverRadius:6}}}),T=()=>e.value?{datasets:[{label:"TPS (Transactions Per Second)",data:n.metricsHistory.slice(-300).map(d=>({x:new Date(d.timestamp),y:d.tps||0})).filter(d=>!isNaN(d.x.getTime())),borderColor:"rgb(102, 126, 234)",backgroundColor:"rgba(102, 126, 234, 0.1)",fill:!0,pointBackgroundColor:"rgb(102, 126, 234)",pointBorderColor:"white",pointBorderWidth:2}]}:null,h=()=>e.value?{datasets:[{label:"평균 응답시간 (ms)",data:n.metricsHistory.slice(-300).map(d=>({x:new Date(d.timestamp),y:d.avgResponseTime||0})).filter(d=>!isNaN(d.x.getTime())),borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",fill:!0,pointBackgroundColor:"rgb(147, 51, 234)",pointBorderColor:"white",pointBorderWidth:2}]}:null,U=async()=>{if(!r.value||i)return;await V();const R=T();if(R)try{i=new Chart(r.value,{type:"line",data:R,options:C("Transactions/sec","rgb(102, 126, 234)")})}catch(d){console.error("TPS 차트 생성 오류:",d)}},v=async()=>{if(!p.value||b)return;await V();const R=h();if(R)try{b=new Chart(p.value,{type:"line",data:R,options:C("Response Time (ms)","rgb(147, 51, 234)")})}catch(d){console.error("응답시간 차트 생성 오류:",d)}},E=()=>{if(i){const R=T();R&&(i.data=R,i.update("none"))}if(b){const R=h();R&&(b.data=R,b.update("none"))}},L=()=>{i&&(i.destroy(),i=null),b&&(b.destroy(),b=null)};return q(()=>n.metricsHistory,()=>{!n.loading&&e.value&&E()},{deep:!0}),q(()=>n.loading,R=>{!R&&e.value&&V(()=>{U(),v()})}),J(()=>{window.Chart&&(Chart.defaults.font.family="'Inter', 'Noto Sans KR', sans-serif",Chart.defaults.font.size=10,Chart.defaults.color="#374151",Chart.defaults.font.variant="tabular-nums"),!n.loading&&e.value&&V(()=>{U(),v()})}),lt(()=>{L()}),(R,d)=>(f(),g("div",Lt,[t("div",Ft,[d[2]||(d[2]=t("h3",{class:"chart-title text-sm"},[t("i",{class:"fas fa-chart-line mr-2 text-gray-600 text-sm"}),t("span",null,"TPS 추이")],-1)),t("div",Kt,[s.loading?(f(),g("div",Bt,[...d[0]||(d[0]=[t("i",{class:"fas fa-spinner fa-spin text-2xl text-indigo-500 mb-2"},null,-1),t("p",{class:"text-gray-600"},"차트 로딩 중...",-1)])])):e.value?(f(),g("canvas",{key:2,ref_key:"tpsChartRef",ref:r,id:"tps-chart-"+I(a)},null,8,qt)):(f(),g("div",Ot,[...d[1]||(d[1]=[t("i",{class:"fas fa-chart-line text-gray-400 text-3xl mb-2"},null,-1),t("p",{class:"text-gray-500"},"표시할 데이터가 없습니다",-1)])]))])]),t("div",Gt,[d[5]||(d[5]=t("h3",{class:"chart-title text-sm"},[t("i",{class:"fas fa-chart-area mr-2 text-gray-600 text-sm"}),t("span",null,"응답시간 추이")],-1)),t("div",zt,[s.loading?(f(),g("div",Vt,[...d[3]||(d[3]=[t("i",{class:"fas fa-spinner fa-spin text-2xl text-purple-500 mb-2"},null,-1),t("p",{class:"text-gray-600"},"차트 로딩 중...",-1)])])):e.value?(f(),g("canvas",{key:2,ref_key:"responseTimeChartRef",ref:p,id:"response-time-chart-"+I(a)},null,8,Wt)):(f(),g("div",jt,[...d[4]||(d[4]=[t("i",{class:"fas fa-chart-area text-gray-400 text-3xl mb-2"},null,-1),t("p",{class:"text-gray-500"},"표시할 데이터가 없습니다",-1)])]))])]),s.showExtendedCharts?(f(),g("div",Zt,[t("div",Jt,[d[6]||(d[6]=t("h3",{class:"chart-title text-sm"},[t("i",{class:"fas fa-exclamation-triangle mr-2 text-red-500 text-sm"}),t("span",{class:"font-['Noto Sans KR']"},"에러율 추이")],-1)),t("div",Qt,[t("canvas",{ref_key:"errorRateChartRef",ref:u,id:"error-rate-chart-"+I(a)},null,8,Xt)])]),t("div",Yt,[d[7]||(d[7]=t("h3",{class:"chart-title text-sm"},[t("i",{class:"fas fa-users mr-2 text-blue-500 text-sm"}),t("span",{class:"font-['Noto Sans KR']"},"동시 사용자 추이")],-1)),t("div",te,[t("canvas",{ref_key:"usersChartRef",ref:l,id:"users-chart-"+I(a)},null,8,ee)])])])):_("",!0)]))}},ae=B(se,[["__scopeId","data-v-5d84200f"]]),re={class:"flat-card p-4 mb-4"},le={class:"overflow-x-auto"},ne={class:"detail-table"},oe={class:"table-cell"},ie={class:"font-medium"},ue={class:"table-cell font-mono"},ce={class:"table-cell"},de={class:"table-cell font-mono"},fe={key:0},me={class:"table-cell"},ge={key:1},pe={class:"table-cell"},ve={key:2},ye={class:"table-cell"},he={class:"text-gray-700"},xe={key:3,class:"error-row"},be={class:"table-cell"},Re={class:"error-message"},we={class:"text-red-600 font-medium"},Te={key:4},$e={class:"table-cell font-mono"},ke={key:5},Ce={class:"table-cell font-mono"},Ne={key:0,class:"mt-6 pt-6 border-t border-gray-200"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Ie={key:0,class:"info-item"},Se={class:"info-value"},Ae={key:1,class:"info-item"},_e={class:"info-value"},Me={key:2,class:"info-item"},Ue={class:"flex flex-wrap gap-1 mt-1"},Ee={__name:"DetailTable",props:{testResult:{type:Object,required:!0,default:()=>({})}},setup(s){const n=s,r=a=>a==null?"N/A":new Intl.NumberFormat("ko-KR").format(a),p=a=>{if(!a)return"N/A";try{const e=new Date(a);return isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(e)}catch(e){return console.warn("날짜 포맷팅 오류:",e),"N/A"}},u=a=>({COMPLETED:"완료",RUNNING:"실행 중",FAILED:"실패",PENDING:"대기 중",CANCELLED:"취소됨"})[a==null?void 0:a.toUpperCase()]||a||"N/A",l=a=>{const e="status-badge";switch(a==null?void 0:a.toLowerCase()){case"completed":return`${e} status-completed`;case"running":return`${e} status-running`;case"failed":return`${e} status-failed`;case"pending":return`${e} status-pending`;case"cancelled":return`${e} status-cancelled`;default:return`${e} status-unknown`}},i=a=>{switch(a==null?void 0:a.toLowerCase()){case"completed":return"fas fa-check-circle";case"running":return"fas fa-spinner fa-spin";case"failed":return"fas fa-times-circle";case"pending":return"fas fa-clock";case"cancelled":return"fas fa-ban";default:return"fas fa-question-circle"}},b=D(()=>{const a=n.testResult;return a.version||a.environment||a.tags&&a.tags.length>0});return(a,e)=>(f(),g("div",re,[e[15]||(e[15]=t("h3",{class:"table-title"},[t("i",{class:"fas fa-list-alt mr-2 text-gray-600"}),t("span",null,"테스트 상세 정보")],-1)),t("div",le,[t("table",ne,[t("tbody",null,[t("tr",null,[e[0]||(e[0]=t("th",{class:"table-header"},[t("i",{class:"fas fa-tag mr-2 text-gray-500"}),S(" 테스트 이름 ")],-1)),t("td",oe,[t("span",ie,x(s.testResult.testName||"N/A"),1)])]),t("tr",null,[e[1]||(e[1]=t("th",{class:"table-header"},[t("i",{class:"fas fa-clipboard mr-2 text-gray-500"}),S(" Plan ID ")],-1)),t("td",ue,x(s.testResult.planId||"N/A"),1)]),t("tr",null,[e[2]||(e[2]=t("th",{class:"table-header"},[t("i",{class:"fas fa-info-circle mr-2 text-gray-500"}),S(" 상태 ")],-1)),t("td",ce,[t("span",{class:G([l(s.testResult.status),"status-badge"])},[t("i",{class:G([i(s.testResult.status),"mr-1"])},null,2),S(" "+x(u(s.testResult.status)),1)],2)])]),t("tr",null,[e[3]||(e[3]=t("th",{class:"table-header"},[t("i",{class:"fas fa-users mr-2 text-gray-500"}),S(" 최대 동시 사용자 ")],-1)),t("td",de,x(r(s.testResult.maxConcurrentUsers)),1)]),s.testResult.testType?(f(),g("tr",fe,[e[4]||(e[4]=t("th",{class:"table-header"},[t("i",{class:"fas fa-cog mr-2 text-gray-500"}),S(" 테스트 유형 ")],-1)),t("td",me,x(s.testResult.testType),1)])):_("",!0),s.testResult.scenario?(f(),g("tr",ge,[e[5]||(e[5]=t("th",{class:"table-header"},[t("i",{class:"fas fa-play mr-2 text-gray-500"}),S(" 시나리오 ")],-1)),t("td",pe,x(s.testResult.scenario),1)])):_("",!0),s.testResult.description?(f(),g("tr",ve,[e[6]||(e[6]=t("th",{class:"table-header"},[t("i",{class:"fas fa-file-alt mr-2 text-gray-500"}),S(" 설명 ")],-1)),t("td",ye,[t("span",he,x(s.testResult.description),1)])])):_("",!0),s.testResult.errorMessage?(f(),g("tr",xe,[e[8]||(e[8]=t("th",{class:"table-header text-red-700"},[t("i",{class:"fas fa-exclamation-triangle mr-2 text-red-500"}),S(" 에러 메시지 ")],-1)),t("td",be,[t("div",Re,[e[7]||(e[7]=t("i",{class:"fas fa-times-circle text-red-500 mr-2"},null,-1)),t("span",we,x(s.testResult.errorMessage),1)])])])):_("",!0),s.testResult.createdAt?(f(),g("tr",Te,[e[9]||(e[9]=t("th",{class:"table-header"},[t("i",{class:"fas fa-calendar-plus mr-2 text-gray-500"}),S(" 생성 일시 ")],-1)),t("td",$e,x(p(s.testResult.createdAt)),1)])):_("",!0),s.testResult.updatedAt?(f(),g("tr",ke,[e[10]||(e[10]=t("th",{class:"table-header"},[t("i",{class:"fas fa-calendar-check mr-2 text-gray-500"}),S(" 수정 일시 ")],-1)),t("td",Ce,x(p(s.testResult.updatedAt)),1)])):_("",!0)])])]),b.value?(f(),g("div",Ne,[e[14]||(e[14]=t("h4",{class:"text-base font-semibold text-gray-800 mb-2"},[t("i",{class:"fas fa-info mr-2 text-gray-600"}),S(" 추가 정보 ")],-1)),t("div",De,[s.testResult.version?(f(),g("div",Ie,[e[11]||(e[11]=t("span",{class:"info-label"},"버전:",-1)),t("span",Se,x(s.testResult.version),1)])):_("",!0),s.testResult.environment?(f(),g("div",Ae,[e[12]||(e[12]=t("span",{class:"info-label"},"환경:",-1)),t("span",_e,x(s.testResult.environment),1)])):_("",!0),s.testResult.tags&&s.testResult.tags.length>0?(f(),g("div",Me,[e[13]||(e[13]=t("span",{class:"info-label"},"태그:",-1)),t("div",Ue,[(f(!0),g(Q,null,X(s.testResult.tags,C=>(f(),g("span",{key:C,class:"inline-block bg-gray-100 text-gray-700 px-2 py-1 border border-gray-200 text-xs"},x(C),1))),128))])])):_("",!0)])])):_("",!0)]))}},He=B(Ee,[["__scopeId","data-v-f533e089"]]),Pe={class:"text-center mt-4"},Le={key:0,class:"report-link-container"},Fe=["href"],Ke={key:1,class:"report-generating"},Be={key:2,class:"report-unavailable"},Oe=["disabled"],qe={key:3,class:"report-loading"},Ge={__name:"GatlingReportLink",props:{reportUrl:{type:String,default:null},testId:{type:String,default:null},testStatus:{type:String,default:"COMPLETED"},allowRegenerate:{type:Boolean,default:!1}},emits:["report-clicked","regenerate-requested"],setup(s,{emit:n}){const r=s,p=n,u=N(!1),l=N(!1),i=N(!1),b=N(!1);D(()=>r.testStatus==="COMPLETED"&&!r.reportUrl&&!i.value);const a=T=>{p("report-clicked",{url:r.reportUrl,testId:r.testId,timestamp:new Date().toISOString()}),window.gtag&&window.gtag("event","gatling_report_click",{test_id:r.testId,report_url:r.reportUrl}),console.log("Gatling 리포트 열기:",r.reportUrl)},e=async()=>{if(!l.value){l.value=!0;try{p("regenerate-requested",r.testId),setTimeout(()=>{u.value=!0,i.value=!1},500)}catch(T){console.error("리포트 재생성 요청 오류:",T)}finally{l.value=!1}}},C=async T=>{if(!T)return!1;try{const h=await fetch(T,{method:"HEAD",mode:"no-cors"});return!0}catch(h){return console.warn("리포트 링크 검증 실패:",h),!0}};return q(()=>r.reportUrl,async T=>{T?(b.value=await C(T),i.value=!1,u.value=!1):r.testStatus==="COMPLETED"&&setTimeout(()=>{r.reportUrl||(i.value=!0,u.value=!1)},3e3)}),q(()=>r.testStatus,T=>{T==="COMPLETED"&&!r.reportUrl&&(u.value=!0,i.value=!1)}),J(()=>{r.reportUrl?C(r.reportUrl):r.testStatus==="COMPLETED"&&(u.value=!0,setTimeout(()=>{r.reportUrl||(u.value=!1,i.value=!0)},5e3))}),(T,h)=>(f(),g("div",Pe,[s.reportUrl?(f(),g("div",Le,[t("a",{href:s.reportUrl,target:"_blank",rel:"noopener noreferrer",class:"report-link",onClick:a},[...h[0]||(h[0]=[t("i",{class:"fas fa-external-link-alt mr-2"},null,-1),t("span",{class:"text-sm"},"Gatling 상세 리포트 보기",-1),t("i",{class:"fas fa-chart-line ml-2 text-white"},null,-1)])],8,Fe),h[1]||(h[1]=t("p",{class:"report-info"},[t("i",{class:"fas fa-info-circle mr-1 text-gray-500"}),S(" 새 창에서 상세한 성능 분석 리포트를 확인할 수 있습니다 ")],-1))])):u.value?(f(),g("div",Ke,[...h[2]||(h[2]=[nt('<div class="flex items-center justify-center mb-4" data-v-2adfda1e><i class="fas fa-cog fa-spin text-xl text-gray-600 mr-2" data-v-2adfda1e></i><span class="text-base font-semibold text-gray-700" data-v-2adfda1e>리포트 생성 중...</span></div><p class="text-gray-600" data-v-2adfda1e> Gatling 리포트를 생성하고 있습니다. 잠시만 기다려주세요. </p><div class="progress-bar" data-v-2adfda1e><div class="progress-fill" data-v-2adfda1e></div></div>',3)])])):i.value?(f(),g("div",Be,[h[3]||(h[3]=t("div",{class:"flex items-center justify-center mb-4"},[t("i",{class:"fas fa-file-slash text-xl text-gray-400 mr-2"}),t("span",{class:"text-base font-semibold text-gray-600"},"리포트를 사용할 수 없음")],-1)),h[4]||(h[4]=t("p",{class:"text-gray-500 mb-4"}," 이 테스트에 대한 Gatling 리포트가 생성되지 않았거나 삭제되었습니다. ",-1)),s.allowRegenerate?(f(),g("button",{key:0,onClick:e,disabled:l.value,class:"btn-regenerate"},[t("i",{class:G([l.value?"fas fa-spinner fa-spin":"fas fa-redo","mr-2"])},null,2),S(" "+x(l.value?"재생성 중...":"리포트 재생성"),1)],8,Oe)):_("",!0)])):(f(),g("div",qe,[...h[5]||(h[5]=[t("i",{class:"fas fa-spinner fa-spin text-xl text-gray-400"},null,-1)])]))]))}},ze=B(Ge,[["__scopeId","data-v-2adfda1e"]]),Ve={class:"min-h-screen bg-gray-50"},je={key:0,class:"space-y-8"},We={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4"},Ze={key:1,class:"bg-red-50 border border-red-200 p-4 text-center"},Je={class:"text-red-600 mb-4"},Qe={key:2},Xe={key:3,class:"bg-yellow-50 border border-yellow-200 p-4 text-center"},Ye={__name:"App",setup(s){const n=new URLSearchParams(window.location.search),r=N(n.get("testId")||null),{testResult:p,metricsHistory:u,reportUrl:l,loading:i,chartsLoading:b,error:a,hasData:e,loadResults:C,loadMetricsHistory:T,loadReportUrl:h}=dt();return J(async()=>{var U;if(console.log("Results App mounted with testId:",r.value),console.log("Initial state - loading:",i.value,"error:",a.value,"testResult:",p.value,"hasData:",e.value),!r.value){a.value="테스트 ID가 제공되지 않았습니다.";return}try{console.log("Loading test results for:",r.value),await C(r.value),console.log("After loadResults - loading:",i.value,"error:",a.value,"hasData:",e.value),console.log("Test result loaded:",p.value),console.log("Test result has testId:",(U=p.value)==null?void 0:U.testId),await Promise.all([T(r.value),h(r.value)]),console.log("All data loaded successfully"),console.log("Final state - loading:",i.value,"error:",a.value,"hasData:",e.value)}catch(v){console.error("결과 로드 실패:",v),a.value=v.message||"결과를 불러오는데 실패했습니다."}}),(U,v)=>(f(),g("div",Ve,[v[7]||(v[7]=t("div",{class:"flex justify-between items-center mb-4"},[t("h1",{class:"text-2xl font-bold"},"테스트 결과 상세"),t("a",{href:"/performance/dashboard",class:"btn btn-secondary btn-sm"},[t("i",{class:"fas fa-arrow-left"}),S(" 대시보드로 ")])],-1)),I(i)?(f(),g("div",je,[v[1]||(v[1]=t("div",{class:"bg-gray-200 animate-pulse h-32 border border-gray-300"},null,-1)),t("div",We,[(f(),g(Q,null,X(6,E=>t("div",{key:E,class:"bg-gray-200 animate-pulse h-24 border border-gray-300"})),64))]),v[2]||(v[2]=t("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},[t("div",{class:"bg-gray-200 animate-pulse h-80 border border-gray-300"}),t("div",{class:"bg-gray-200 animate-pulse h-80 border border-gray-300"})],-1))])):I(a)?(f(),g("div",Ze,[v[4]||(v[4]=t("i",{class:"fas fa-exclamation-triangle text-red-500 text-3xl mb-4"},null,-1)),v[5]||(v[5]=t("h3",{class:"text-lg font-semibold text-red-800 mb-2"},"결과 로드 실패",-1)),t("p",Je,x(I(a)),1),t("button",{onClick:v[0]||(v[0]=(...E)=>I(C)&&I(C)(...E)),class:"btn btn-primary"},[...v[3]||(v[3]=[t("i",{class:"fas fa-redo mr-2"},null,-1),S("다시 시도 ",-1)])])])):I(e)?(f(),g("div",Qe,[j(Tt,{"test-result":I(p)},null,8,["test-result"]),j(Pt,{"test-result":I(p)},null,8,["test-result"]),j(ae,{"metrics-history":I(u),loading:I(b)},null,8,["metrics-history","loading"]),j(He,{"test-result":I(p)},null,8,["test-result"]),I(l)?(f(),ot(ze,{key:0,"report-url":I(l)},null,8,["report-url"])):_("",!0)])):(f(),g("div",Xe,[...v[6]||(v[6]=[t("i",{class:"fas fa-search text-yellow-500 text-3xl mb-4"},null,-1),t("h3",{class:"text-lg font-semibold text-yellow-800 mb-2"},"결과를 찾을 수 없습니다",-1),t("p",{class:"text-yellow-600"},"요청하신 테스트 결과가 존재하지 않습니다.",-1)])]))]))}},ts=B(Ye,[["__scopeId","data-v-4ad19af3"]]),es=it(),z=ut(ts);z.use(es);z.config.errorHandler=(s,n,r)=>{console.error("Vue 앱 에러:",s,r),window.showNotification&&window.showNotification("앱 오류가 발생했습니다.","error")};z.config.globalProperties.$formatNumber=(s,n=0)=>s==null?"N/A":new Intl.NumberFormat("ko-KR",{minimumFractionDigits:n,maximumFractionDigits:n}).format(s);z.config.globalProperties.$formatDateTime=(s,n="full")=>{if(!s)return"N/A";const r=new Date(s);if(isNaN(r.getTime()))return"Invalid Date";const p={full:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},short:{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},time:{hour:"2-digit",minute:"2-digit",hour12:!1}};return new Intl.DateTimeFormat("ko-KR",p[n]||p.full).format(r)};z.mount("#app");
